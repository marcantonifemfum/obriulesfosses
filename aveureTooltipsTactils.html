<!DOCTYPE html>
<html>
	<!-- https://www.w3schools.com/graphics/canvas_images.asp -->
<head>
<script>

//*
const canemas = document.getElementById("canvas");
const canemas = canvas.getContext("2d");
const imatge = document.getElementById("obriulesfosses");

imatge.addEventListener
(
 "load", (e) =>
 {
  canemas.drawImage(imatge, 0, 0);
 }
);
*//

</script>
<style>
canvas {border:1px solid blue;background:#eee}
</style>
</head>

<body>

<canvas id="canvas" width="500" height="500">
<!-- <canvas id="onvasCanvas" width="2347" height="2347"> -->
Sorry, your browser does not support canvas.
</canvas>

<script>

var canvas = document.querySelector("canvas");
    ctx = canvas.getContext("2d");

    // aquí el codi del tooltip
    //regiont1 = {x: 50, y: 50, w: 100, h: 100};

//ctx.fillStyle = "#79f";
//ctx.fillRect(region.x, region.y, region.w, region.h);

// create a tool-tip instance:
	//var t1 = new ToolTip(canvas, region, "Aquest<br>text t&eacute; una vida de 3000ms", 150, 3000);
	//var t1 = new ToolTip(canvas, regiont1, "Aquest<br>text t&eacute; una vida de 3000ms", 150, 3000);
	var t1 = new ToolTip(canvas, {x: 50, y: 50, w: 100, h: 100}, "<strong>Aquest</strong><br>text t&eacute; una vida de 3000ms", 150, 3000);
	var t2 = new ToolTip(canvas, {x: 0, y: 400, w: 100, h: 100}, "aqu&iacute tenim un altre text!", 150, 3000);

// The Tool-Tip instance:
function ToolTip(canvas, region, text, width, timeout)
{
 var me = this,                                // self-reference for event handlers
     div = document.createElement("div"),      // the tool-tip div
     parent = canvas.parentNode,               // parent node for canvas
     visible = false;                          // current status

 // set some initial styles, can be replaced by class-name etc.
 div.style.cssText = "position:fixed;padding:7px;background:white;pointer-events:none;width:" + width + "px";
 div.innerHTML = text;

 // show the tool-tip
 this.show = function(pos)
 {
  if (!visible) 
  {                             // ignore if already shown (or reset time)
   visible = true;                           // lock so it's only shown once
   setDivPos(pos);                           // set position
   parent.appendChild(div);                  // add to parent of canvas
   setTimeout(hide, timeout);                // timeout for hide
  }
 }

 // hide the tool-tip
 function hide()
 {
  visible = false;                            // hide it after timeout
  parent.removeChild(div);                    // remove from DOM
 }

 // check mouse position, add limits as wanted... just for example:
 function check(e)
 {
  var pos = getPos(e),
  posAbs = {x: e.clientX, y: e.clientY};  // div is fixed, so use clientX/Y
  if
  (
   !visible &&
   pos.x >= region.x && pos.x < region.x + region.w &&
   pos.y >= region.y && pos.y < region.y + region.h
  )
  {
   me.show(posAbs);                          // show tool-tip at this pos
  }
  else setDivPos(posAbs);                     // otherwise, update position
 }

 // get mouse position relative to canvas
 function getPos(e)
 {
  var r = canvas.getBoundingClientRect();
  return {x: e.clientX - r.left, y: e.clientY - r.top}
 }

 // update and adjust div position if needed (anchor to a different corner etc.)
 function setDivPos(pos)
 {
  if (visible)
  {
   if (pos.x < 0) pos.x = 0;
   if (pos.y < 0) pos.y = 0;
   // other bound checks here
   div.style.left = pos.x + "px";
   div.style.top = pos.y + "px";
  }
 }

 // we need to use shared event handlers:
 canvas.addEventListener("mousemove", check);
 canvas.addEventListener("click", check);

}

// aquí la imatge
const image = new Image(2347, 2347); // Using optional size for image
image.onload = drawImageActualSize; // Draw when image has loaded

// Load an image of intrinsic size 300x227 in CSS pixels
image.src = "htmls/21281074503_obriulesfosses.png";

function drawImageActualSize() {
  // Use the intrinsic size of image in CSS pixels for the canvas element
  canvas.width = this.naturalWidth;
  canvas.height = this.naturalHeight;

  // Will draw the image as 300x227, ignoring the custom size of 60x45
  // given in the constructor
  ctx.drawImage(this, 0, 0);

  // To use the custom size we'll have to specify the scale parameters
  // using the element's width and height properties - lets draw one
  // on top in the corner:
  ctx.drawImage(this, 0, 0, this.width, this.height);
}

</script>

<!--
<div style="display:none;">
<img id="obriulesfosses" src="htmls/21281074503_obriulesfosses.png">
</div>
-->

</body>

</html>

